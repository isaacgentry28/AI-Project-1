{% extends 'base.html' %}
{% block content %}
<h1>Preprocess</h1>
<form method="post">
  <label>Target column (optional):</label>
  <input type="text" name="target" placeholder="e.g. label">

  <div class="grid2">
    <div>
      <label>Numeric impute strategy</label>
      <select name="impute_strategy">
        <option value="median">median</option>
        <option value="mean">mean</option>
        <option value="most_frequent">most_frequent</option>
      </select>
    </div>
    <div>
      <label>Scale numeric?</label>
      <select name="scale_numeric">
        <option value="true" selected>true</option>
        <option value="false">false</option>
      </select>
    </div>
    <div>
      <label>One-hot encode categoricals?</label>
      <select name="one_hot_categorical">
        <option value="true" selected>true</option>
        <option value="false">false</option>
      </select>
    </div>
    <div>
      <label>Test size</label>
      <input type="number" step="0.01" name="test_size" value="0.2">
    </div>
    <div>
      <label>Val size</label>
      <input type="number" step="0.01" name="val_size" value="0.1">
    </div>
    <div>
      <label>Random seed</label>
      <input type="number" name="random_state" value="42">
    </div>
  </div>
  <button type="submit">Run Preprocessing</button>
</form>

{% if stats %}
  <h2>Results</h2>
  <ul>
    <li>Rows (train): {{ stats.n_train }}</li>
    <li>Rows (val): {{ stats.n_val }}</li>
    <li>Rows (test): {{ stats.n_test }}</li>
    <li>Target Provided: {{ 'Yes' if stats.has_target else 'No' }}</li>
    <li>Artifacts folder: <code>{{ stats.artifacts }}</code></li>
  </ul>
{% endif %}
{% endblock %}